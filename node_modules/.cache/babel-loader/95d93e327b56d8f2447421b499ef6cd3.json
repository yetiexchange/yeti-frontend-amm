{"ast":null,"code":"import _regeneratorRuntime from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _createClass from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _inherits from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _wrapNativeSuper from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";import{AbstractConnector}from'@web3-react/abstract-connector';import warning from'tiny-warning';function parseSendReturn(sendReturn){// eslint-disable-next-line no-prototype-builtins\nreturn sendReturn.hasOwnProperty('result')?sendReturn.result:sendReturn;}export var NoBscProviderError=/*#__PURE__*/function(_Error){_inherits(NoBscProviderError,_Error);var _super=_createSuper(NoBscProviderError);function NoBscProviderError(){var _this;_classCallCheck(this,NoBscProviderError);_this=_super.call(this);_this.name=_this.constructor.name;_this.message='No BSC provider was found on window.BinanceChain.';return _this;}return NoBscProviderError;}(/*#__PURE__*/_wrapNativeSuper(Error));export var UserRejectedRequestError=/*#__PURE__*/function(_Error2){_inherits(UserRejectedRequestError,_Error2);var _super2=_createSuper(UserRejectedRequestError);function UserRejectedRequestError(){var _this2;_classCallCheck(this,UserRejectedRequestError);_this2=_super2.call(this);_this2.name=_this2.constructor.name;_this2.message='The user rejected the request.';return _this2;}return UserRejectedRequestError;}(/*#__PURE__*/_wrapNativeSuper(Error));export var BscConnector=/*#__PURE__*/function(_AbstractConnector){_inherits(BscConnector,_AbstractConnector);var _super3=_createSuper(BscConnector);function BscConnector(kwargs){var _this3;_classCallCheck(this,BscConnector);_this3=_super3.call(this,kwargs);_this3.handleNetworkChanged=_this3.handleNetworkChanged.bind(_assertThisInitialized(_this3));_this3.handleChainChanged=_this3.handleChainChanged.bind(_assertThisInitialized(_this3));_this3.handleAccountsChanged=_this3.handleAccountsChanged.bind(_assertThisInitialized(_this3));_this3.handleClose=_this3.handleClose.bind(_assertThisInitialized(_this3));return _this3;}_createClass(BscConnector,[{key:\"handleChainChanged\",value:function handleChainChanged(chainId){this.emitUpdate({chainId:chainId,provider:window.BinanceChain});}},{key:\"handleAccountsChanged\",value:function handleAccountsChanged(accounts){if(accounts.length===0){this.emitDeactivate();}else{this.emitUpdate({account:accounts[0]});}}},{key:\"handleClose\",value:function handleClose(){this.emitDeactivate();}},{key:\"handleNetworkChanged\",value:function handleNetworkChanged(networkId){this.emitUpdate({chainId:networkId,provider:window.BinanceChain});}},{key:\"activate\",value:function(){var _activate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var account;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(window.BinanceChain){_context.next=2;break;}throw new NoBscProviderError();case 2:if(window.BinanceChain.on){window.BinanceChain.on('chainChanged',this.handleChainChanged);window.BinanceChain.on('accountsChanged',this.handleAccountsChanged);window.BinanceChain.on('close',this.handleClose);window.BinanceChain.on('networkChanged',this.handleNetworkChanged);}if(window.BinanceChain.isMetaMask){window.BinanceChain.autoRefreshOnNetworkChange=false;}// try to activate + get account via eth_requestAccounts\n_context.prev=4;_context.next=7;return window.BinanceChain.send('eth_requestAccounts').then(function(sendReturn){return parseSendReturn(sendReturn)[0];});case 7:account=_context.sent;_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](4);if(!(_context.t0.code===4001)){_context.next=14;break;}throw new UserRejectedRequestError();case 14:warning(false,'eth_requestAccounts was unsuccessful, falling back to enable');case 15:if(account){_context.next=19;break;}_context.next=18;return window.BinanceChain.enable().then(function(sendReturn){return sendReturn&&parseSendReturn(sendReturn)[0];});case 18:account=_context.sent;case 19:return _context.abrupt(\"return\",_objectSpread({provider:window.BinanceChain},account?{account:account}:{}));case 20:case\"end\":return _context.stop();}}},_callee,this,[[4,10]]);}));function activate(){return _activate.apply(this,arguments);}return activate;}()},{key:\"getProvider\",value:function(){var _getProvider=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",window.BinanceChain);case 1:case\"end\":return _context2.stop();}}},_callee2);}));function getProvider(){return _getProvider.apply(this,arguments);}return getProvider;}()},{key:\"getChainId\",value:function(){var _getChainId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var chainId;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(window.BinanceChain){_context3.next=2;break;}throw new NoBscProviderError();case 2:_context3.prev=2;_context3.next=5;return window.BinanceChain.send('eth_chainId').then(parseSendReturn);case 5:chainId=_context3.sent;_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](2);warning(false,'eth_chainId was unsuccessful, falling back to net_version');case 11:if(chainId){_context3.next=21;break;}_context3.prev=12;_context3.next=15;return window.BinanceChain.send('net_version').then(parseSendReturn);case 15:chainId=_context3.sent;_context3.next=21;break;case 18:_context3.prev=18;_context3.t1=_context3[\"catch\"](12);warning(false,'net_version was unsuccessful, falling back to net version v2');case 21:if(!chainId){try{chainId=parseSendReturn(window.BinanceChain.send({method:'net_version'}));}catch(_unused3){warning(false,'net_version v2 was unsuccessful, falling back to manual matches and static properties');}}if(!chainId){if(window.BinanceChain.isDapper){chainId=parseSendReturn(window.BinanceChain.cachedResults.net_version);}else{chainId=window.BinanceChain.chainId||window.BinanceChain.netVersion||window.BinanceChain.networkVersion||window.BinanceChain._chainId;}}return _context3.abrupt(\"return\",chainId);case 24:case\"end\":return _context3.stop();}}},_callee3,null,[[2,8],[12,18]]);}));function getChainId(){return _getChainId.apply(this,arguments);}return getChainId;}()},{key:\"getAccount\",value:function(){var _getAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var account;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(window.BinanceChain){_context4.next=2;break;}throw new NoBscProviderError();case 2:_context4.prev=2;_context4.next=5;return window.BinanceChain.send('eth_accounts').then(function(sendReturn){return parseSendReturn(sendReturn)[0];});case 5:account=_context4.sent;_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](2);warning(false,'eth_accounts was unsuccessful, falling back to enable');case 11:if(account){_context4.next=21;break;}_context4.prev=12;_context4.next=15;return window.BinanceChain.enable().then(function(sendReturn){return parseSendReturn(sendReturn)[0];});case 15:account=_context4.sent;_context4.next=21;break;case 18:_context4.prev=18;_context4.t1=_context4[\"catch\"](12);warning(false,'enable was unsuccessful, falling back to eth_accounts v2');case 21:if(!account){account=parseSendReturn(window.BinanceChain.send({method:'eth_accounts'}))[0];}return _context4.abrupt(\"return\",account);case 23:case\"end\":return _context4.stop();}}},_callee4,null,[[2,8],[12,18]]);}));function getAccount(){return _getAccount.apply(this,arguments);}return getAccount;}()},{key:\"deactivate\",value:function deactivate(){if(window.BinanceChain&&window.BinanceChain.removeListener){window.BinanceChain.removeListener('chainChanged',this.handleChainChanged);window.BinanceChain.removeListener('accountsChanged',this.handleAccountsChanged);window.BinanceChain.removeListener('close',this.handleClose);window.BinanceChain.removeListener('networkChanged',this.handleNetworkChanged);}}},{key:\"isAuthorized\",value:function(){var _isAuthorized=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(window.BinanceChain){_context5.next=2;break;}return _context5.abrupt(\"return\",false);case 2:_context5.prev=2;_context5.next=5;return window.BinanceChain.send('eth_accounts').then(function(sendReturn){if(parseSendReturn(sendReturn).length>0){return true;}return false;});case 5:return _context5.abrupt(\"return\",_context5.sent);case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](2);return _context5.abrupt(\"return\",false);case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[2,8]]);}));function isAuthorized(){return _isAuthorized.apply(this,arguments);}return isAuthorized;}()}]);return BscConnector;}(AbstractConnector);","map":{"version":3,"sources":["H:/XETI/YETI-AMM-DEV/src/connectors/bsc/bscConnector.ts"],"names":["AbstractConnector","warning","parseSendReturn","sendReturn","hasOwnProperty","result","NoBscProviderError","name","constructor","message","Error","UserRejectedRequestError","BscConnector","kwargs","handleNetworkChanged","bind","handleChainChanged","handleAccountsChanged","handleClose","chainId","emitUpdate","provider","window","BinanceChain","accounts","length","emitDeactivate","account","networkId","on","isMetaMask","autoRefreshOnNetworkChange","send","then","code","enable","method","isDapper","cachedResults","net_version","netVersion","networkVersion","_chainId","removeListener"],"mappings":"muCACA,OAASA,iBAAT,KAAkC,gCAAlC,CACA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CAIA,QAASC,CAAAA,eAAT,CAAyBC,UAAzB,CAAyE,CACvE;AACA,MAAOA,CAAAA,UAAU,CAACC,cAAX,CAA0B,QAA1B,EAAsCD,UAAU,CAACE,MAAjD,CAA0DF,UAAjE,CACD,CAED,UAAaG,CAAAA,kBAAb,gHACE,6BAAqB,oDACnB,wBACA,MAAKC,IAAL,CAAY,MAAKC,WAAL,CAAiBD,IAA7B,CACA,MAAKE,OAAL,CAAe,mDAAf,CAHmB,aAIpB,CALH,0DAAwCC,KAAxC,GAQA,UAAaC,CAAAA,wBAAb,+HACE,mCAAqB,2DACnB,0BACA,OAAKJ,IAAL,CAAY,OAAKC,WAAL,CAAiBD,IAA7B,CACA,OAAKE,OAAL,CAAe,gCAAf,CAHmB,cAIpB,CALH,gEAA8CC,KAA9C,GAQA,UAAaE,CAAAA,YAAb,6HACE,sBAAYC,MAAZ,CAAgD,+CAC9C,yBAAMA,MAAN,EAEA,OAAKC,oBAAL,CAA4B,OAAKA,oBAAL,CAA0BC,IAA1B,gCAA5B,CACA,OAAKC,kBAAL,CAA0B,OAAKA,kBAAL,CAAwBD,IAAxB,gCAA1B,CACA,OAAKE,qBAAL,CAA6B,OAAKA,qBAAL,CAA2BF,IAA3B,gCAA7B,CACA,OAAKG,WAAL,CAAmB,OAAKA,WAAL,CAAiBH,IAAjB,gCAAnB,CAN8C,cAO/C,CARH,2DAUE,4BAA2BI,OAA3B,CAA2D,CACzD,KAAKC,UAAL,CAAgB,CAAED,OAAO,CAAPA,OAAF,CAAWE,QAAQ,CAAEC,MAAM,CAACC,YAA5B,CAAhB,EACD,CAZH,qCAcE,+BAA8BC,QAA9B,CAAwD,CACtD,GAAIA,QAAQ,CAACC,MAAT,GAAoB,CAAxB,CAA2B,CACzB,KAAKC,cAAL,GACD,CAFD,IAEO,CACL,KAAKN,UAAL,CAAgB,CAAEO,OAAO,CAAEH,QAAQ,CAAC,CAAD,CAAnB,CAAhB,EACD,CACF,CApBH,2BAsBE,sBAA4B,CAC1B,KAAKE,cAAL,GACD,CAxBH,oCA0BE,8BAA6BE,SAA7B,CAA+D,CAC7D,KAAKR,UAAL,CAAgB,CAAED,OAAO,CAAES,SAAX,CAAsBP,QAAQ,CAAEC,MAAM,CAACC,YAAvC,CAAhB,EACD,CA5BH,yGA8BE,kJACOD,MAAM,CAACC,YADd,8BAEU,IAAIjB,CAAAA,kBAAJ,EAFV,QAKE,GAAIgB,MAAM,CAACC,YAAP,CAAoBM,EAAxB,CAA4B,CAC1BP,MAAM,CAACC,YAAP,CAAoBM,EAApB,CAAuB,cAAvB,CAAuC,KAAKb,kBAA5C,EACAM,MAAM,CAACC,YAAP,CAAoBM,EAApB,CAAuB,iBAAvB,CAA0C,KAAKZ,qBAA/C,EACAK,MAAM,CAACC,YAAP,CAAoBM,EAApB,CAAuB,OAAvB,CAAgC,KAAKX,WAArC,EACAI,MAAM,CAACC,YAAP,CAAoBM,EAApB,CAAuB,gBAAvB,CAAyC,KAAKf,oBAA9C,EACD,CAED,GAAKQ,MAAM,CAACC,YAAR,CAA6BO,UAAjC,CAA6C,CAC1CR,MAAM,CAACC,YAAR,CAA6BQ,0BAA7B,CAA0D,KAA1D,CACD,CAED;AAhBF,sCAmBqBT,CAAAA,MAAM,CAACC,YAAP,CAAoBS,IAArB,CAAmC,qBAAnC,EAA0DC,IAA1D,CACd,SAAC9B,UAAD,QAAgBD,CAAAA,eAAe,CAACC,UAAD,CAAf,CAA4B,CAA5B,CAAhB,EADc,CAnBpB,QAmBIwB,OAnBJ,qGAuBQ,YAAeO,IAAf,GAAwB,IAvBhC,gCAwBY,IAAIvB,CAAAA,wBAAJ,EAxBZ,SA0BIV,OAAO,CAAC,KAAD,CAAQ,8DAAR,CAAP,CA1BJ,WA8BO0B,OA9BP,iDAgCoBL,CAAAA,MAAM,CAACC,YAAP,CAAoBY,MAApB,GAA6BF,IAA7B,CAAkC,SAAC9B,UAAD,QAAgBA,CAAAA,UAAU,EAAID,eAAe,CAACC,UAAD,CAAf,CAA4B,CAA5B,CAA9B,EAAlC,CAhCpB,SAgCIwB,OAhCJ,sEAmCWN,QAAQ,CAAEC,MAAM,CAACC,YAnC5B,EAmC8CI,OAAO,CAAG,CAAEA,OAAO,CAAPA,OAAF,CAAH,CAAiB,EAnCtE,wEA9BF,iMAoEE,yKACSL,MAAM,CAACC,YADhB,0DApEF,wMAwEE,uJACOD,MAAM,CAACC,YADd,+BAEU,IAAIjB,CAAAA,kBAAJ,EAFV,gDAOqBgB,CAAAA,MAAM,CAACC,YAAP,CAAoBS,IAArB,CAAmC,aAAnC,EAAkDC,IAAlD,CAAuD/B,eAAvD,CAPpB,QAOIiB,OAPJ,mGASIlB,OAAO,CAAC,KAAD,CAAQ,2DAAR,CAAP,CATJ,WAYOkB,OAZP,qEAcuBG,CAAAA,MAAM,CAACC,YAAP,CAAoBS,IAArB,CAAmC,aAAnC,EAAkDC,IAAlD,CAAuD/B,eAAvD,CAdtB,SAcMiB,OAdN,sGAgBMlB,OAAO,CAAC,KAAD,CAAQ,8DAAR,CAAP,CAhBN,QAoBE,GAAI,CAACkB,OAAL,CAAc,CACZ,GAAI,CACFA,OAAO,CAAGjB,eAAe,CAAEoB,MAAM,CAACC,YAAP,CAAoBS,IAArB,CAAsC,CAAEI,MAAM,CAAE,aAAV,CAAtC,CAAD,CAAzB,CACD,CAAC,eAAM,CACNnC,OAAO,CAAC,KAAD,CAAQ,uFAAR,CAAP,CACD,CACF,CAED,GAAI,CAACkB,OAAL,CAAc,CACZ,GAAKG,MAAM,CAACC,YAAR,CAA6Bc,QAAjC,CAA2C,CACzClB,OAAO,CAAGjB,eAAe,CAAEoB,MAAM,CAACC,YAAR,CAA6Be,aAA7B,CAA2CC,WAA5C,CAAzB,CACD,CAFD,IAEO,CACLpB,OAAO,CACJG,MAAM,CAACC,YAAR,CAA6BJ,OAA7B,EACCG,MAAM,CAACC,YAAR,CAA6BiB,UAD7B,EAEClB,MAAM,CAACC,YAAR,CAA6BkB,cAF7B,EAGCnB,MAAM,CAACC,YAAR,CAA6BmB,QAJ/B,CAKD,CACF,CAtCH,iCAwCSvB,OAxCT,gFAxEF,qMAmHE,uJACOG,MAAM,CAACC,YADd,+BAEU,IAAIjB,CAAAA,kBAAJ,EAFV,gDAOqBgB,CAAAA,MAAM,CAACC,YAAP,CAAoBS,IAArB,CAAmC,cAAnC,EAAmDC,IAAnD,CACd,SAAC9B,UAAD,QAAgBD,CAAAA,eAAe,CAACC,UAAD,CAAf,CAA4B,CAA5B,CAAhB,EADc,CAPpB,QAOIwB,OAPJ,mGAWI1B,OAAO,CAAC,KAAD,CAAQ,uDAAR,CAAP,CAXJ,WAcO0B,OAdP,qEAgBsBL,CAAAA,MAAM,CAACC,YAAP,CAAoBY,MAApB,GAA6BF,IAA7B,CAAkC,SAAC9B,UAAD,QAAgBD,CAAAA,eAAe,CAACC,UAAD,CAAf,CAA4B,CAA5B,CAAhB,EAAlC,CAhBtB,SAgBMwB,OAhBN,sGAkBM1B,OAAO,CAAC,KAAD,CAAQ,0DAAR,CAAP,CAlBN,QAsBE,GAAI,CAAC0B,OAAL,CAAc,CACZA,OAAO,CAAGzB,eAAe,CAAEoB,MAAM,CAACC,YAAP,CAAoBS,IAArB,CAAsC,CAAEI,MAAM,CAAE,cAAV,CAAtC,CAAD,CAAf,CAAmF,CAAnF,CAAV,CACD,CAxBH,iCA0BST,OA1BT,gFAnHF,kHAgJE,qBAAoB,CAClB,GAAIL,MAAM,CAACC,YAAP,EAAuBD,MAAM,CAACC,YAAP,CAAoBoB,cAA/C,CAA+D,CAC7DrB,MAAM,CAACC,YAAP,CAAoBoB,cAApB,CAAmC,cAAnC,CAAmD,KAAK3B,kBAAxD,EACAM,MAAM,CAACC,YAAP,CAAoBoB,cAApB,CAAmC,iBAAnC,CAAsD,KAAK1B,qBAA3D,EACAK,MAAM,CAACC,YAAP,CAAoBoB,cAApB,CAAmC,OAAnC,CAA4C,KAAKzB,WAAjD,EACAI,MAAM,CAACC,YAAP,CAAoBoB,cAApB,CAAmC,gBAAnC,CAAqD,KAAK7B,oBAA1D,EACD,CACF,CAvJH,iHAyJE,2IACOQ,MAAM,CAACC,YADd,2DAEW,KAFX,iDAMkBD,CAAAA,MAAM,CAACC,YAAP,CAAoBS,IAArB,CAAmC,cAAnC,EAAmDC,IAAnD,CAAwD,SAAC9B,UAAD,CAAgB,CACnF,GAAID,eAAe,CAACC,UAAD,CAAf,CAA4BsB,MAA5B,CAAqC,CAAzC,CAA4C,CAC1C,MAAO,KAAP,CACD,CACD,MAAO,MAAP,CACD,CALY,CANjB,qJAaW,KAbX,wEAzJF,wHAAkCzB,iBAAlC","sourcesContent":["import { AbstractConnectorArguments, ConnectorUpdate } from '@web3-react/types'\nimport { AbstractConnector } from '@web3-react/abstract-connector'\nimport warning from 'tiny-warning'\n\nimport { SendReturnResult, SendReturn, Send, SendOld } from './types'\n\nfunction parseSendReturn(sendReturn: SendReturnResult | SendReturn): any {\n  // eslint-disable-next-line no-prototype-builtins\n  return sendReturn.hasOwnProperty('result') ? sendReturn.result : sendReturn\n}\n\nexport class NoBscProviderError extends Error {\n  public constructor() {\n    super()\n    this.name = this.constructor.name\n    this.message = 'No BSC provider was found on window.BinanceChain.'\n  }\n}\n\nexport class UserRejectedRequestError extends Error {\n  public constructor() {\n    super()\n    this.name = this.constructor.name\n    this.message = 'The user rejected the request.'\n  }\n}\n\nexport class BscConnector extends AbstractConnector {\n  constructor(kwargs: AbstractConnectorArguments) {\n    super(kwargs)\n\n    this.handleNetworkChanged = this.handleNetworkChanged.bind(this)\n    this.handleChainChanged = this.handleChainChanged.bind(this)\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this)\n    this.handleClose = this.handleClose.bind(this)\n  }\n\n  private handleChainChanged(chainId: string | number): void {\n    this.emitUpdate({ chainId, provider: window.BinanceChain })\n  }\n\n  private handleAccountsChanged(accounts: string[]): void {\n    if (accounts.length === 0) {\n      this.emitDeactivate()\n    } else {\n      this.emitUpdate({ account: accounts[0] })\n    }\n  }\n\n  private handleClose(): void {\n    this.emitDeactivate()\n  }\n\n  private handleNetworkChanged(networkId: string | number): void {\n    this.emitUpdate({ chainId: networkId, provider: window.BinanceChain })\n  }\n\n  public async activate(): Promise<ConnectorUpdate> {\n    if (!window.BinanceChain) {\n      throw new NoBscProviderError()\n    }\n\n    if (window.BinanceChain.on) {\n      window.BinanceChain.on('chainChanged', this.handleChainChanged)\n      window.BinanceChain.on('accountsChanged', this.handleAccountsChanged)\n      window.BinanceChain.on('close', this.handleClose)\n      window.BinanceChain.on('networkChanged', this.handleNetworkChanged)\n    }\n\n    if ((window.BinanceChain as any).isMetaMask) {\n      (window.BinanceChain as any).autoRefreshOnNetworkChange = false\n    }\n\n    // try to activate + get account via eth_requestAccounts\n    let account\n    try {\n      account = await (window.BinanceChain.send as Send)('eth_requestAccounts').then(\n        (sendReturn) => parseSendReturn(sendReturn)[0]\n      )\n    } catch (error) {\n      if ((error as any).code === 4001) {\n        throw new UserRejectedRequestError()\n      }\n      warning(false, 'eth_requestAccounts was unsuccessful, falling back to enable')\n    }\n\n    // if unsuccessful, try enable\n    if (!account) {\n      // if enable is successful but doesn't return accounts, fall back to getAccount (not happy i have to do this...)\n      account = await window.BinanceChain.enable().then((sendReturn) => sendReturn && parseSendReturn(sendReturn)[0])\n    }\n\n    return { provider: window.BinanceChain, ...(account ? { account } : {}) }\n  }\n\n  public async getProvider(): Promise<any> {\n    return window.BinanceChain\n  }\n\n  public async getChainId(): Promise<number | string> {\n    if (!window.BinanceChain) {\n      throw new NoBscProviderError()\n    }\n\n    let chainId\n    try {\n      chainId = await (window.BinanceChain.send as Send)('eth_chainId').then(parseSendReturn)\n    } catch {\n      warning(false, 'eth_chainId was unsuccessful, falling back to net_version')\n    }\n\n    if (!chainId) {\n      try {\n        chainId = await (window.BinanceChain.send as Send)('net_version').then(parseSendReturn)\n      } catch {\n        warning(false, 'net_version was unsuccessful, falling back to net version v2')\n      }\n    }\n\n    if (!chainId) {\n      try {\n        chainId = parseSendReturn((window.BinanceChain.send as SendOld)({ method: 'net_version' }))\n      } catch {\n        warning(false, 'net_version v2 was unsuccessful, falling back to manual matches and static properties')\n      }\n    }\n\n    if (!chainId) {\n      if ((window.BinanceChain as any).isDapper) {\n        chainId = parseSendReturn((window.BinanceChain as any).cachedResults.net_version)\n      } else {\n        chainId =\n          (window.BinanceChain as any).chainId ||\n          (window.BinanceChain as any).netVersion ||\n          (window.BinanceChain as any).networkVersion ||\n          (window.BinanceChain as any)._chainId\n      }\n    }\n\n    return chainId\n  }\n\n  public async getAccount(): Promise<null | string> {\n    if (!window.BinanceChain) {\n      throw new NoBscProviderError()\n    }\n\n    let account\n    try {\n      account = await (window.BinanceChain.send as Send)('eth_accounts').then(\n        (sendReturn) => parseSendReturn(sendReturn)[0]\n      )\n    } catch {\n      warning(false, 'eth_accounts was unsuccessful, falling back to enable')\n    }\n\n    if (!account) {\n      try {\n        account = await window.BinanceChain.enable().then((sendReturn) => parseSendReturn(sendReturn)[0])\n      } catch {\n        warning(false, 'enable was unsuccessful, falling back to eth_accounts v2')\n      }\n    }\n\n    if (!account) {\n      account = parseSendReturn((window.BinanceChain.send as SendOld)({ method: 'eth_accounts' }))[0]\n    }\n\n    return account\n  }\n\n  public deactivate() {\n    if (window.BinanceChain && window.BinanceChain.removeListener) {\n      window.BinanceChain.removeListener('chainChanged', this.handleChainChanged)\n      window.BinanceChain.removeListener('accountsChanged', this.handleAccountsChanged)\n      window.BinanceChain.removeListener('close', this.handleClose)\n      window.BinanceChain.removeListener('networkChanged', this.handleNetworkChanged)\n    }\n  }\n\n  public async isAuthorized(): Promise<boolean> {\n    if (!window.BinanceChain) {\n      return false\n    }\n\n    try {\n      return await (window.BinanceChain.send as Send)('eth_accounts').then((sendReturn) => {\n        if (parseSendReturn(sendReturn).length > 0) {\n          return true\n        }\n        return false\n      })\n    } catch {\n      return false\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}