{"ast":null,"code":"import _objectSpread from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"H:/XETI/YETI-AMM-DEV/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{JSBI,Token}from'@pancakeswap-libs/sdk';import React,{useCallback,useContext,useEffect,useMemo,useState}from'react';import{ArrowDown}from'react-feather';import{CardBody,ArrowDownIcon,Button,IconButton,Text}from'@pancakeswap-libs/uikit';import{ThemeContext}from'styled-components';import AddressInputPanel from'components/AddressInputPanel';import Card,{GreyCard}from'components/Card';import{AutoColumn}from'components/Column';import ConfirmSwapModal from'components/swap/ConfirmSwapModal';import CurrencyInputPanel from'components/CurrencyInputPanel';import CardNav from'components/CardNav';import{AutoRow,RowBetween}from'components/Row';import AdvancedSwapDetailsDropdown from'components/swap/AdvancedSwapDetailsDropdown';import BetterTradeLink from'components/swap/BetterTradeLink';import confirmPriceImpactWithoutFee from'components/swap/confirmPriceImpactWithoutFee';import{ArrowWrapper,BottomGrouping,SwapCallbackError,Wrapper}from'components/swap/styleds';import TradePrice from'components/swap/TradePrice';import TokenWarningModal from'components/TokenWarningModal';import SyrupWarningModal from'components/SyrupWarningModal';import ProgressSteps from'components/ProgressSteps';import{BETTER_TRADE_LINK_THRESHOLD,INITIAL_ALLOWED_SLIPPAGE}from'constants/index';import{isTradeBetter}from'data/V1';import{useActiveWeb3React}from'hooks';import{useCurrency}from'hooks/Tokens';import{ApprovalState,useApproveCallbackFromTrade}from'hooks/useApproveCallback';import{useSwapCallback}from'hooks/useSwapCallback';import useToggledVersion,{Version}from'hooks/useToggledVersion';import useWrapCallback,{WrapType}from'hooks/useWrapCallback';import{Field}from'state/swap/actions';import{useDefaultsFromURLSearch,useDerivedSwapInfo,useSwapActionHandlers,useSwapState}from'state/swap/hooks';import{useExpertModeManager,useUserDeadline,useUserSlippageTolerance}from'state/user/hooks';import{LinkStyledButton,TYPE}from'components/Shared';import{maxAmountSpend}from'utils/maxAmountSpend';import{computeTradePriceBreakdown,warningSeverity}from'utils/prices';import Loader from'components/Loader';import{TranslateString}from'utils/translateTextHelpers';import PageHeader from'components/PageHeader';import ConnectWalletButton from'components/ConnectWalletButton';import AppBody from'../AppBody';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Main=TYPE.main;var Swap=function Swap(){var _Version$v1$Version$v,_ref3,_ref4,_parsedAmounts$indepe,_parsedAmounts$indepe2,_parsedAmounts$depend,_parsedAmounts$depend2,_formattedAmounts,_parsedAmounts$indepe3,_parsedAmounts$Field$,_currencies$Field$INP;var loadedUrlParams=useDefaultsFromURLSearch();// token warning stuff\nvar _ref=[useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.inputCurrencyId),useCurrency(loadedUrlParams===null||loadedUrlParams===void 0?void 0:loadedUrlParams.outputCurrencyId)],loadedInputCurrency=_ref[0],loadedOutputCurrency=_ref[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),dismissTokenWarning=_useState2[0],setDismissTokenWarning=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSyrup=_useState4[0],setIsSyrup=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),syrupTransactionType=_useState6[0],setSyrupTransactionType=_useState6[1];var urlLoadedTokens=useMemo(function(){var _filter,_ref2;return(_filter=(_ref2=[loadedInputCurrency,loadedOutputCurrency])===null||_ref2===void 0?void 0:_ref2.filter(function(c){return c instanceof Token;}))!==null&&_filter!==void 0?_filter:[];},[loadedInputCurrency,loadedOutputCurrency]);var handleConfirmTokenWarning=useCallback(function(){setDismissTokenWarning(true);},[]);var handleConfirmSyrupWarning=useCallback(function(){setIsSyrup(false);setSyrupTransactionType('');},[]);var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;var theme=useContext(ThemeContext);var _useExpertModeManager=useExpertModeManager(),_useExpertModeManager2=_slicedToArray(_useExpertModeManager,1),isExpertMode=_useExpertModeManager2[0];// get custom setting values for user\nvar _useUserDeadline=useUserDeadline(),_useUserDeadline2=_slicedToArray(_useUserDeadline,1),deadline=_useUserDeadline2[0];var _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,1),allowedSlippage=_useUserSlippageToler2[0];// swap state\nvar _useSwapState=useSwapState(),independentField=_useSwapState.independentField,typedValue=_useSwapState.typedValue,recipient=_useSwapState.recipient;var _useDerivedSwapInfo=useDerivedSwapInfo(),v1Trade=_useDerivedSwapInfo.v1Trade,v2Trade=_useDerivedSwapInfo.v2Trade,currencyBalances=_useDerivedSwapInfo.currencyBalances,parsedAmount=_useDerivedSwapInfo.parsedAmount,currencies=_useDerivedSwapInfo.currencies,swapInputError=_useDerivedSwapInfo.inputError;var _useWrapCallback=useWrapCallback(currencies[Field.INPUT],currencies[Field.OUTPUT],typedValue),wrapType=_useWrapCallback.wrapType,onWrap=_useWrapCallback.execute,wrapInputError=_useWrapCallback.inputError;var showWrap=wrapType!==WrapType.NOT_APPLICABLE;//   const { address: recipientAddress } = useENSAddress(recipient)\nvar toggledVersion=useToggledVersion();var trade=showWrap?undefined:(_Version$v1$Version$v={},_defineProperty(_Version$v1$Version$v,Version.v1,v1Trade),_defineProperty(_Version$v1$Version$v,Version.v2,v2Trade),_Version$v1$Version$v)[toggledVersion];var betterTradeLinkVersion=toggledVersion===Version.v2&&isTradeBetter(v2Trade,v1Trade,BETTER_TRADE_LINK_THRESHOLD)?Version.v1:toggledVersion===Version.v1&&isTradeBetter(v1Trade,v2Trade)?Version.v2:undefined;var parsedAmounts=showWrap?(_ref3={},_defineProperty(_ref3,Field.INPUT,parsedAmount),_defineProperty(_ref3,Field.OUTPUT,parsedAmount),_ref3):(_ref4={},_defineProperty(_ref4,Field.INPUT,independentField===Field.INPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.inputAmount),_defineProperty(_ref4,Field.OUTPUT,independentField===Field.OUTPUT?parsedAmount:trade===null||trade===void 0?void 0:trade.outputAmount),_ref4);var _useSwapActionHandler=useSwapActionHandlers(),onSwitchTokens=_useSwapActionHandler.onSwitchTokens,onCurrencySelection=_useSwapActionHandler.onCurrencySelection,onUserInput=_useSwapActionHandler.onUserInput,onChangeRecipient=_useSwapActionHandler.onChangeRecipient;var isValid=!swapInputError;var dependentField=independentField===Field.INPUT?Field.OUTPUT:Field.INPUT;var handleTypeInput=useCallback(function(value){onUserInput(Field.INPUT,value);},[onUserInput]);var handleTypeOutput=useCallback(function(value){onUserInput(Field.OUTPUT,value);},[onUserInput]);// modal and loading\nvar _useState7=useState({showConfirm:false,tradeToConfirm:undefined,attemptingTxn:false,swapErrorMessage:undefined,txHash:undefined}),_useState8=_slicedToArray(_useState7,2),_useState8$=_useState8[0],showConfirm=_useState8$.showConfirm,tradeToConfirm=_useState8$.tradeToConfirm,swapErrorMessage=_useState8$.swapErrorMessage,attemptingTxn=_useState8$.attemptingTxn,txHash=_useState8$.txHash,setSwapState=_useState8[1];var formattedAmounts=(_formattedAmounts={},_defineProperty(_formattedAmounts,independentField,typedValue),_defineProperty(_formattedAmounts,dependentField,showWrap?(_parsedAmounts$indepe=(_parsedAmounts$indepe2=parsedAmounts[independentField])===null||_parsedAmounts$indepe2===void 0?void 0:_parsedAmounts$indepe2.toExact())!==null&&_parsedAmounts$indepe!==void 0?_parsedAmounts$indepe:'':(_parsedAmounts$depend=(_parsedAmounts$depend2=parsedAmounts[dependentField])===null||_parsedAmounts$depend2===void 0?void 0:_parsedAmounts$depend2.toSignificant(6))!==null&&_parsedAmounts$depend!==void 0?_parsedAmounts$depend:''),_formattedAmounts);var route=trade===null||trade===void 0?void 0:trade.route;var userHasSpecifiedInputOutput=Boolean(currencies[Field.INPUT]&&currencies[Field.OUTPUT]&&((_parsedAmounts$indepe3=parsedAmounts[independentField])===null||_parsedAmounts$indepe3===void 0?void 0:_parsedAmounts$indepe3.greaterThan(JSBI.BigInt(0))));var noRoute=!route;// check whether the user has approved the router on the input token\nvar _useApproveCallbackFr=useApproveCallbackFromTrade(trade,allowedSlippage),_useApproveCallbackFr2=_slicedToArray(_useApproveCallbackFr,2),approval=_useApproveCallbackFr2[0],approveCallback=_useApproveCallbackFr2[1];// check if user has gone through approval process, used to show two step buttons, reset on token change\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),approvalSubmitted=_useState10[0],setApprovalSubmitted=_useState10[1];// mark when a user has submitted an approval, reset onTokenSelection for input field\nuseEffect(function(){if(approval===ApprovalState.PENDING){setApprovalSubmitted(true);}},[approval,approvalSubmitted]);var maxAmountInput=maxAmountSpend(currencyBalances[Field.INPUT]);var atMaxAmountInput=Boolean(maxAmountInput&&((_parsedAmounts$Field$=parsedAmounts[Field.INPUT])===null||_parsedAmounts$Field$===void 0?void 0:_parsedAmounts$Field$.equalTo(maxAmountInput)));// the callback to execute the swap\nvar _useSwapCallback=useSwapCallback(trade,allowedSlippage,deadline,recipient),swapCallback=_useSwapCallback.callback,swapCallbackError=_useSwapCallback.error;var _computeTradePriceBre=computeTradePriceBreakdown(trade),priceImpactWithoutFee=_computeTradePriceBre.priceImpactWithoutFee;var handleSwap=useCallback(function(){if(priceImpactWithoutFee&&!confirmPriceImpactWithoutFee(priceImpactWithoutFee)){return;}if(!swapCallback){return;}setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{attemptingTxn:true,swapErrorMessage:undefined,txHash:undefined});});swapCallback().then(function(hash){setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{attemptingTxn:false,swapErrorMessage:undefined,txHash:hash});});}).catch(function(error){setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{attemptingTxn:false,swapErrorMessage:error.message,txHash:undefined});});});},[priceImpactWithoutFee,swapCallback,setSwapState]);// errors\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showInverted=_useState12[0],setShowInverted=_useState12[1];// warnings on slippage\nvar priceImpactSeverity=warningSeverity(priceImpactWithoutFee);// show approve flow when: no error on inputs, not approved or pending, or approved in current session\n// never show if price impact is above threshold in non expert mode\nvar showApproveFlow=!swapInputError&&(approval===ApprovalState.NOT_APPROVED||approval===ApprovalState.PENDING||approvalSubmitted&&approval===ApprovalState.APPROVED)&&!(priceImpactSeverity>3&&!isExpertMode);var handleConfirmDismiss=useCallback(function(){setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{showConfirm:false});});// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.INPUT,'');}},[onUserInput,txHash,setSwapState]);var handleAcceptChanges=useCallback(function(){setSwapState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{tradeToConfirm:trade});});},[trade]);// This will check to see if the user has selected Syrup to either buy or sell.\n// If so, they will be alerted with a warning message.\nvar checkForSyrup=useCallback(function(selected,purchaseType){if(selected==='syrup'){setIsSyrup(true);setSyrupTransactionType(purchaseType);}},[setIsSyrup,setSyrupTransactionType]);var handleInputSelect=useCallback(function(inputCurrency){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonCurrencySelection(Field.INPUT,inputCurrency);if(inputCurrency.symbol.toLowerCase()==='syrup'){checkForSyrup(inputCurrency.symbol.toLowerCase(),'Selling');}},[onCurrencySelection,setApprovalSubmitted,checkForSyrup]);var handleMaxInput=useCallback(function(){if(maxAmountInput){onUserInput(Field.INPUT,maxAmountInput.toExact());}},[maxAmountInput,onUserInput]);var handleOutputSelect=useCallback(function(outputCurrency){onCurrencySelection(Field.OUTPUT,outputCurrency);if(outputCurrency.symbol.toLowerCase()==='syrup'){checkForSyrup(outputCurrency.symbol.toLowerCase(),'Buying');}},[onCurrencySelection,checkForSyrup]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TokenWarningModal,{isOpen:urlLoadedTokens.length>0&&!dismissTokenWarning,tokens:urlLoadedTokens,onConfirm:handleConfirmTokenWarning}),/*#__PURE__*/_jsx(SyrupWarningModal,{isOpen:isSyrup,transactionType:syrupTransactionType,onConfirm:handleConfirmSyrupWarning}),/*#__PURE__*/_jsx(CardNav,{}),/*#__PURE__*/_jsx(AppBody,{children:/*#__PURE__*/_jsxs(Wrapper,{id:\"swap-page\",children:[/*#__PURE__*/_jsx(ConfirmSwapModal,{isOpen:showConfirm,trade:trade,originalTrade:tradeToConfirm,onAcceptChanges:handleAcceptChanges,attemptingTxn:attemptingTxn,txHash:txHash,recipient:recipient,allowedSlippage:allowedSlippage,onConfirm:handleSwap,swapErrorMessage:swapErrorMessage,onDismiss:handleConfirmDismiss}),/*#__PURE__*/_jsx(PageHeader,{title:\"Exchange\",description:\"Trade tokens in an instant\"}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(AutoColumn,{gap:\"md\",children:[/*#__PURE__*/_jsx(CurrencyInputPanel,{label:independentField===Field.OUTPUT&&!showWrap&&trade?'From (estimated)':TranslateString(76,'From'),value:formattedAmounts[Field.INPUT],showMaxButton:!atMaxAmountInput,currency:currencies[Field.INPUT],onUserInput:handleTypeInput,onMax:handleMaxInput,onCurrencySelect:handleInputSelect,otherCurrency:currencies[Field.OUTPUT],id:\"swap-currency-input\"}),/*#__PURE__*/_jsx(AutoColumn,{justify:\"space-between\",children:/*#__PURE__*/_jsxs(AutoRow,{justify:isExpertMode?'space-between':'center',style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:true,children:/*#__PURE__*/_jsx(IconButton,{variant:\"tertiary\",onClick:function onClick(){setApprovalSubmitted(false);// reset 2 step UI for approvals\nonSwitchTokens();},style:{borderRadius:'50%'},size:\"sm\",children:/*#__PURE__*/_jsx(ArrowDownIcon,{color:\"primary\",width:\"24px\"})})}),recipient===null&&!showWrap&&isExpertMode?/*#__PURE__*/_jsx(LinkStyledButton,{id:\"add-recipient-button\",onClick:function onClick(){return onChangeRecipient('');},children:\"+ Add a send (optional)\"}):null]})}),/*#__PURE__*/_jsx(CurrencyInputPanel,{value:formattedAmounts[Field.OUTPUT],onUserInput:handleTypeOutput,label:independentField===Field.INPUT&&!showWrap&&trade?'To (estimated)':TranslateString(80,'To'),showMaxButton:false,currency:currencies[Field.OUTPUT],onCurrencySelect:handleOutputSelect,otherCurrency:currencies[Field.INPUT],id:\"swap-currency-output\"}),recipient!==null&&!showWrap?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AutoRow,{justify:\"space-between\",style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(ArrowWrapper,{clickable:false,children:/*#__PURE__*/_jsx(ArrowDown,{size:\"16\",color:theme.colors.textSubtle})}),/*#__PURE__*/_jsx(LinkStyledButton,{id:\"remove-recipient-button\",onClick:function onClick(){return onChangeRecipient(null);},children:\"- Remove send\"})]}),/*#__PURE__*/_jsx(AddressInputPanel,{id:\"recipient\",value:recipient,onChange:onChangeRecipient})]}):null,showWrap?null:/*#__PURE__*/_jsx(Card,{padding:\".25rem .75rem 0 .75rem\",borderRadius:\"20px\",children:/*#__PURE__*/_jsxs(AutoColumn,{gap:\"4px\",children:[Boolean(trade)&&/*#__PURE__*/_jsxs(RowBetween,{align:\"center\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"14px\",children:\"Price\"}),/*#__PURE__*/_jsx(TradePrice,{price:trade===null||trade===void 0?void 0:trade.executionPrice,showInverted:showInverted,setShowInverted:setShowInverted})]}),allowedSlippage!==INITIAL_ALLOWED_SLIPPAGE&&/*#__PURE__*/_jsxs(RowBetween,{align:\"center\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"14px\",children:\"Slippage Tolerance\"}),/*#__PURE__*/_jsxs(Text,{fontSize:\"14px\",children:[allowedSlippage/100,\"%\"]})]})]})})]}),/*#__PURE__*/_jsxs(BottomGrouping,{children:[!account?/*#__PURE__*/_jsx(ConnectWalletButton,{fullWidth:true}):showWrap?/*#__PURE__*/_jsx(Button,{disabled:Boolean(wrapInputError),onClick:onWrap,fullWidth:true,children:wrapInputError!==null&&wrapInputError!==void 0?wrapInputError:wrapType===WrapType.WRAP?'Wrap':wrapType===WrapType.UNWRAP?'Unwrap':null}):noRoute&&userHasSpecifiedInputOutput?/*#__PURE__*/_jsx(GreyCard,{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(Main,{mb:\"4px\",children:\"Insufficient liquidity for this trade.\"})}):showApproveFlow?/*#__PURE__*/_jsxs(RowBetween,{children:[/*#__PURE__*/_jsx(Button,{onClick:approveCallback,disabled:approval!==ApprovalState.NOT_APPROVED||approvalSubmitted,style:{width:'48%'},variant:approval===ApprovalState.APPROVED?'success':'primary',children:approval===ApprovalState.PENDING?/*#__PURE__*/_jsxs(AutoRow,{gap:\"6px\",justify:\"center\",children:[\"Approving \",/*#__PURE__*/_jsx(Loader,{stroke:\"white\"})]}):approvalSubmitted&&approval===ApprovalState.APPROVED?'Approved':\"Approve \".concat((_currencies$Field$INP=currencies[Field.INPUT])===null||_currencies$Field$INP===void 0?void 0:_currencies$Field$INP.symbol)}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},style:{width:'48%'},id:\"swap-button\",disabled:!isValid||approval!==ApprovalState.APPROVED||priceImpactSeverity>3&&!isExpertMode,variant:isValid&&priceImpactSeverity>2?'danger':'primary',children:priceImpactSeverity>3&&!isExpertMode?\"Price Impact High\":\"Swap\".concat(priceImpactSeverity>2?' Anyway':'')})]}):/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(isExpertMode){handleSwap();}else{setSwapState({tradeToConfirm:trade,attemptingTxn:false,swapErrorMessage:undefined,showConfirm:true,txHash:undefined});}},id:\"swap-button\",disabled:!isValid||priceImpactSeverity>3&&!isExpertMode||!!swapCallbackError,variant:isValid&&priceImpactSeverity>2&&!swapCallbackError?'danger':'primary',fullWidth:true,children:swapInputError||(priceImpactSeverity>3&&!isExpertMode?\"Price Impact Too High\":\"Swap\".concat(priceImpactSeverity>2?' Anyway':''))}),showApproveFlow&&/*#__PURE__*/_jsx(ProgressSteps,{steps:[approval===ApprovalState.APPROVED]}),isExpertMode&&swapErrorMessage?/*#__PURE__*/_jsx(SwapCallbackError,{error:swapErrorMessage}):null,betterTradeLinkVersion&&/*#__PURE__*/_jsx(BetterTradeLink,{version:betterTradeLinkVersion})]})]})]})}),/*#__PURE__*/_jsx(AdvancedSwapDetailsDropdown,{trade:trade})]});};export default Swap;","map":{"version":3,"sources":["H:/XETI/YETI-AMM-DEV/src/pages/Swap/index.tsx"],"names":["JSBI","Token","React","useCallback","useContext","useEffect","useMemo","useState","ArrowDown","CardBody","ArrowDownIcon","Button","IconButton","Text","ThemeContext","AddressInputPanel","Card","GreyCard","AutoColumn","ConfirmSwapModal","CurrencyInputPanel","CardNav","AutoRow","RowBetween","AdvancedSwapDetailsDropdown","BetterTradeLink","confirmPriceImpactWithoutFee","ArrowWrapper","BottomGrouping","SwapCallbackError","Wrapper","TradePrice","TokenWarningModal","SyrupWarningModal","ProgressSteps","BETTER_TRADE_LINK_THRESHOLD","INITIAL_ALLOWED_SLIPPAGE","isTradeBetter","useActiveWeb3React","useCurrency","ApprovalState","useApproveCallbackFromTrade","useSwapCallback","useToggledVersion","Version","useWrapCallback","WrapType","Field","useDefaultsFromURLSearch","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","useExpertModeManager","useUserDeadline","useUserSlippageTolerance","LinkStyledButton","TYPE","maxAmountSpend","computeTradePriceBreakdown","warningSeverity","Loader","TranslateString","PageHeader","ConnectWalletButton","AppBody","Main","main","Swap","loadedUrlParams","inputCurrencyId","outputCurrencyId","loadedInputCurrency","loadedOutputCurrency","dismissTokenWarning","setDismissTokenWarning","isSyrup","setIsSyrup","syrupTransactionType","setSyrupTransactionType","urlLoadedTokens","filter","c","handleConfirmTokenWarning","handleConfirmSyrupWarning","account","theme","isExpertMode","deadline","allowedSlippage","independentField","typedValue","recipient","v1Trade","v2Trade","currencyBalances","parsedAmount","currencies","swapInputError","inputError","INPUT","OUTPUT","wrapType","onWrap","execute","wrapInputError","showWrap","NOT_APPLICABLE","toggledVersion","trade","undefined","v1","v2","betterTradeLinkVersion","parsedAmounts","inputAmount","outputAmount","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","isValid","dependentField","handleTypeInput","value","handleTypeOutput","showConfirm","tradeToConfirm","attemptingTxn","swapErrorMessage","txHash","setSwapState","formattedAmounts","toExact","toSignificant","route","userHasSpecifiedInputOutput","Boolean","greaterThan","BigInt","noRoute","approval","approveCallback","approvalSubmitted","setApprovalSubmitted","PENDING","maxAmountInput","atMaxAmountInput","equalTo","swapCallback","callback","swapCallbackError","error","priceImpactWithoutFee","handleSwap","prevState","then","hash","catch","message","showInverted","setShowInverted","priceImpactSeverity","showApproveFlow","NOT_APPROVED","APPROVED","handleConfirmDismiss","handleAcceptChanges","checkForSyrup","selected","purchaseType","handleInputSelect","inputCurrency","symbol","toLowerCase","handleMaxInput","handleOutputSelect","outputCurrency","length","padding","borderRadius","colors","textSubtle","executionPrice","WRAP","UNWRAP","textAlign","width"],"mappings":"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","sourcesContent":["import { CurrencyAmount, JSBI, Token, Trade } from '@pancakeswap-libs/sdk'\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from 'react'\nimport { ArrowDown } from 'react-feather'\nimport { CardBody, ArrowDownIcon, Button, IconButton, Text } from '@pancakeswap-libs/uikit'\nimport { ThemeContext } from 'styled-components'\nimport AddressInputPanel from 'components/AddressInputPanel'\nimport Card, { GreyCard } from 'components/Card'\nimport { AutoColumn } from 'components/Column'\nimport ConfirmSwapModal from 'components/swap/ConfirmSwapModal'\nimport CurrencyInputPanel from 'components/CurrencyInputPanel'\nimport CardNav from 'components/CardNav'\nimport { AutoRow, RowBetween } from 'components/Row'\nimport AdvancedSwapDetailsDropdown from 'components/swap/AdvancedSwapDetailsDropdown'\nimport BetterTradeLink from 'components/swap/BetterTradeLink'\nimport confirmPriceImpactWithoutFee from 'components/swap/confirmPriceImpactWithoutFee'\nimport { ArrowWrapper, BottomGrouping, SwapCallbackError, Wrapper } from 'components/swap/styleds'\nimport TradePrice from 'components/swap/TradePrice'\nimport TokenWarningModal from 'components/TokenWarningModal'\nimport SyrupWarningModal from 'components/SyrupWarningModal'\nimport ProgressSteps from 'components/ProgressSteps'\n\nimport { BETTER_TRADE_LINK_THRESHOLD, INITIAL_ALLOWED_SLIPPAGE } from 'constants/index'\nimport { isTradeBetter } from 'data/V1'\nimport { useActiveWeb3React } from 'hooks'\nimport { useCurrency } from 'hooks/Tokens'\nimport { ApprovalState, useApproveCallbackFromTrade } from 'hooks/useApproveCallback'\nimport { useSwapCallback } from 'hooks/useSwapCallback'\nimport useToggledVersion, { Version } from 'hooks/useToggledVersion'\nimport useWrapCallback, { WrapType } from 'hooks/useWrapCallback'\nimport { Field } from 'state/swap/actions'\nimport { useDefaultsFromURLSearch, useDerivedSwapInfo, useSwapActionHandlers, useSwapState } from 'state/swap/hooks'\nimport { useExpertModeManager, useUserDeadline, useUserSlippageTolerance } from 'state/user/hooks'\nimport { LinkStyledButton, TYPE } from 'components/Shared'\nimport { maxAmountSpend } from 'utils/maxAmountSpend'\nimport { computeTradePriceBreakdown, warningSeverity } from 'utils/prices'\nimport Loader from 'components/Loader'\nimport { TranslateString } from 'utils/translateTextHelpers'\nimport PageHeader from 'components/PageHeader'\nimport ConnectWalletButton from 'components/ConnectWalletButton'\nimport AppBody from '../AppBody'\n\nconst { main: Main } = TYPE\n\nconst Swap = () => {\n  const loadedUrlParams = useDefaultsFromURLSearch()\n\n  // token warning stuff\n  const [loadedInputCurrency, loadedOutputCurrency] = [\n    useCurrency(loadedUrlParams?.inputCurrencyId),\n    useCurrency(loadedUrlParams?.outputCurrencyId),\n  ]\n  const [dismissTokenWarning, setDismissTokenWarning] = useState<boolean>(false)\n  const [isSyrup, setIsSyrup] = useState<boolean>(false)\n  const [syrupTransactionType, setSyrupTransactionType] = useState<string>('')\n  const urlLoadedTokens: Token[] = useMemo(\n    () => [loadedInputCurrency, loadedOutputCurrency]?.filter((c): c is Token => c instanceof Token) ?? [],\n    [loadedInputCurrency, loadedOutputCurrency]\n  )\n  const handleConfirmTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n  }, [])\n\n  const handleConfirmSyrupWarning = useCallback(() => {\n    setIsSyrup(false)\n    setSyrupTransactionType('')\n  }, [])\n\n  const { account } = useActiveWeb3React()\n  const theme = useContext(ThemeContext)\n\n  const [isExpertMode] = useExpertModeManager()\n\n  // get custom setting values for user\n  const [deadline] = useUserDeadline()\n  const [allowedSlippage] = useUserSlippageTolerance()\n\n  // swap state\n  const { independentField, typedValue, recipient } = useSwapState()\n  const {\n    v1Trade,\n    v2Trade,\n    currencyBalances,\n    parsedAmount,\n    currencies,\n    inputError: swapInputError,\n  } = useDerivedSwapInfo()\n  const { wrapType, execute: onWrap, inputError: wrapInputError } = useWrapCallback(\n    currencies[Field.INPUT],\n    currencies[Field.OUTPUT],\n    typedValue\n  )\n  const showWrap: boolean = wrapType !== WrapType.NOT_APPLICABLE\n  //   const { address: recipientAddress } = useENSAddress(recipient)\n  const toggledVersion = useToggledVersion()\n  const trade = showWrap\n    ? undefined\n    : {\n        [Version.v1]: v1Trade,\n        [Version.v2]: v2Trade,\n      }[toggledVersion]\n\n  const betterTradeLinkVersion: Version | undefined =\n    toggledVersion === Version.v2 && isTradeBetter(v2Trade, v1Trade, BETTER_TRADE_LINK_THRESHOLD)\n      ? Version.v1\n      : toggledVersion === Version.v1 && isTradeBetter(v1Trade, v2Trade)\n      ? Version.v2\n      : undefined\n\n  const parsedAmounts = showWrap\n    ? {\n        [Field.INPUT]: parsedAmount,\n        [Field.OUTPUT]: parsedAmount,\n      }\n    : {\n        [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade?.inputAmount,\n        [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade?.outputAmount,\n      }\n\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\n  const isValid = !swapInputError\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n\n  const handleTypeInput = useCallback(\n    (value: string) => {\n      onUserInput(Field.INPUT, value)\n    },\n    [onUserInput]\n  )\n  const handleTypeOutput = useCallback(\n    (value: string) => {\n      onUserInput(Field.OUTPUT, value)\n    },\n    [onUserInput]\n  )\n\n  // modal and loading\n  const [{ showConfirm, tradeToConfirm, swapErrorMessage, attemptingTxn, txHash }, setSwapState] = useState<{\n    showConfirm: boolean\n    tradeToConfirm: Trade | undefined\n    attemptingTxn: boolean\n    swapErrorMessage: string | undefined\n    txHash: string | undefined\n  }>({\n    showConfirm: false,\n    tradeToConfirm: undefined,\n    attemptingTxn: false,\n    swapErrorMessage: undefined,\n    txHash: undefined,\n  })\n\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: showWrap\n      ? parsedAmounts[independentField]?.toExact() ?? ''\n      : parsedAmounts[dependentField]?.toSignificant(6) ?? '',\n  }\n\n  const route = trade?.route\n  const userHasSpecifiedInputOutput = Boolean(\n    currencies[Field.INPUT] && currencies[Field.OUTPUT] && parsedAmounts[independentField]?.greaterThan(JSBI.BigInt(0))\n  )\n  const noRoute = !route\n\n  // check whether the user has approved the router on the input token\n  const [approval, approveCallback] = useApproveCallbackFromTrade(trade, allowedSlippage)\n\n  // check if user has gone through approval process, used to show two step buttons, reset on token change\n  const [approvalSubmitted, setApprovalSubmitted] = useState<boolean>(false)\n\n  // mark when a user has submitted an approval, reset onTokenSelection for input field\n  useEffect(() => {\n    if (approval === ApprovalState.PENDING) {\n      setApprovalSubmitted(true)\n    }\n  }, [approval, approvalSubmitted])\n\n  const maxAmountInput: CurrencyAmount | undefined = maxAmountSpend(currencyBalances[Field.INPUT])\n  const atMaxAmountInput = Boolean(maxAmountInput && parsedAmounts[Field.INPUT]?.equalTo(maxAmountInput))\n\n  // the callback to execute the swap\n  const { callback: swapCallback, error: swapCallbackError } = useSwapCallback(\n    trade,\n    allowedSlippage,\n    deadline,\n    recipient\n  )\n\n  const { priceImpactWithoutFee } = computeTradePriceBreakdown(trade)\n\n  const handleSwap = useCallback(() => {\n    if (priceImpactWithoutFee && !confirmPriceImpactWithoutFee(priceImpactWithoutFee)) {\n      return\n    }\n    if (!swapCallback) {\n      return\n    }\n    setSwapState((prevState) => ({ ...prevState, attemptingTxn: true, swapErrorMessage: undefined, txHash: undefined }))\n    swapCallback()\n      .then((hash) => {\n        setSwapState((prevState) => ({\n          ...prevState,\n          attemptingTxn: false,\n          swapErrorMessage: undefined,\n          txHash: hash,\n        }))\n      })\n      .catch((error) => {\n        setSwapState((prevState) => ({\n          ...prevState,\n          attemptingTxn: false,\n          swapErrorMessage: error.message,\n          txHash: undefined,\n        }))\n      })\n  }, [priceImpactWithoutFee, swapCallback, setSwapState])\n\n  // errors\n  const [showInverted, setShowInverted] = useState<boolean>(false)\n\n  // warnings on slippage\n  const priceImpactSeverity = warningSeverity(priceImpactWithoutFee)\n\n  // show approve flow when: no error on inputs, not approved or pending, or approved in current session\n  // never show if price impact is above threshold in non expert mode\n  const showApproveFlow =\n    !swapInputError &&\n    (approval === ApprovalState.NOT_APPROVED ||\n      approval === ApprovalState.PENDING ||\n      (approvalSubmitted && approval === ApprovalState.APPROVED)) &&\n    !(priceImpactSeverity > 3 && !isExpertMode)\n\n  const handleConfirmDismiss = useCallback(() => {\n    setSwapState((prevState) => ({ ...prevState, showConfirm: false }))\n\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onUserInput(Field.INPUT, '')\n    }\n  }, [onUserInput, txHash, setSwapState])\n\n  const handleAcceptChanges = useCallback(() => {\n    setSwapState((prevState) => ({ ...prevState, tradeToConfirm: trade }))\n  }, [trade])\n\n  // This will check to see if the user has selected Syrup to either buy or sell.\n  // If so, they will be alerted with a warning message.\n  const checkForSyrup = useCallback(\n    (selected: string, purchaseType: string) => {\n      if (selected === 'syrup') {\n        setIsSyrup(true)\n        setSyrupTransactionType(purchaseType)\n      }\n    },\n    [setIsSyrup, setSyrupTransactionType]\n  )\n\n  const handleInputSelect = useCallback(\n    (inputCurrency) => {\n      setApprovalSubmitted(false) // reset 2 step UI for approvals\n      onCurrencySelection(Field.INPUT, inputCurrency)\n      if (inputCurrency.symbol.toLowerCase() === 'syrup') {\n        checkForSyrup(inputCurrency.symbol.toLowerCase(), 'Selling')\n      }\n    },\n    [onCurrencySelection, setApprovalSubmitted, checkForSyrup]\n  )\n\n  const handleMaxInput = useCallback(() => {\n    if (maxAmountInput) {\n      onUserInput(Field.INPUT, maxAmountInput.toExact())\n    }\n  }, [maxAmountInput, onUserInput])\n\n  const handleOutputSelect = useCallback(\n    (outputCurrency) => {\n      onCurrencySelection(Field.OUTPUT, outputCurrency)\n      if (outputCurrency.symbol.toLowerCase() === 'syrup') {\n        checkForSyrup(outputCurrency.symbol.toLowerCase(), 'Buying')\n      }\n    },\n    [onCurrencySelection, checkForSyrup]\n  )\n\n  return (\n    <>\n      <TokenWarningModal\n        isOpen={urlLoadedTokens.length > 0 && !dismissTokenWarning}\n        tokens={urlLoadedTokens}\n        onConfirm={handleConfirmTokenWarning}\n      />\n      <SyrupWarningModal\n        isOpen={isSyrup}\n        transactionType={syrupTransactionType}\n        onConfirm={handleConfirmSyrupWarning}\n      />\n      <CardNav />\n      <AppBody>\n        <Wrapper id=\"swap-page\">\n          <ConfirmSwapModal\n            isOpen={showConfirm}\n            trade={trade}\n            originalTrade={tradeToConfirm}\n            onAcceptChanges={handleAcceptChanges}\n            attemptingTxn={attemptingTxn}\n            txHash={txHash}\n            recipient={recipient}\n            allowedSlippage={allowedSlippage}\n            onConfirm={handleSwap}\n            swapErrorMessage={swapErrorMessage}\n            onDismiss={handleConfirmDismiss}\n          />\n          <PageHeader title=\"Exchange\" description=\"Trade tokens in an instant\" />\n          <CardBody>\n            <AutoColumn gap=\"md\">\n              <CurrencyInputPanel\n                label={\n                  independentField === Field.OUTPUT && !showWrap && trade\n                    ? 'From (estimated)'\n                    : TranslateString(76, 'From')\n                }\n                value={formattedAmounts[Field.INPUT]}\n                showMaxButton={!atMaxAmountInput}\n                currency={currencies[Field.INPUT]}\n                onUserInput={handleTypeInput}\n                onMax={handleMaxInput}\n                onCurrencySelect={handleInputSelect}\n                otherCurrency={currencies[Field.OUTPUT]}\n                id=\"swap-currency-input\"\n              />\n              <AutoColumn justify=\"space-between\">\n                <AutoRow justify={isExpertMode ? 'space-between' : 'center'} style={{ padding: '0 1rem' }}>\n                  <ArrowWrapper clickable>\n                    <IconButton\n                      variant=\"tertiary\"\n                      onClick={() => {\n                        setApprovalSubmitted(false) // reset 2 step UI for approvals\n                        onSwitchTokens()\n                      }}\n                      style={{ borderRadius: '50%' }}\n                      size=\"sm\"\n                    >\n                      <ArrowDownIcon color=\"primary\" width=\"24px\" />\n                    </IconButton>\n                  </ArrowWrapper>\n                  {recipient === null && !showWrap && isExpertMode ? (\n                    <LinkStyledButton id=\"add-recipient-button\" onClick={() => onChangeRecipient('')}>\n                      + Add a send (optional)\n                    </LinkStyledButton>\n                  ) : null}\n                </AutoRow>\n              </AutoColumn>\n              <CurrencyInputPanel\n                value={formattedAmounts[Field.OUTPUT]}\n                onUserInput={handleTypeOutput}\n                label={\n                  independentField === Field.INPUT && !showWrap && trade ? 'To (estimated)' : TranslateString(80, 'To')\n                }\n                showMaxButton={false}\n                currency={currencies[Field.OUTPUT]}\n                onCurrencySelect={handleOutputSelect}\n                otherCurrency={currencies[Field.INPUT]}\n                id=\"swap-currency-output\"\n              />\n\n              {recipient !== null && !showWrap ? (\n                <>\n                  <AutoRow justify=\"space-between\" style={{ padding: '0 1rem' }}>\n                    <ArrowWrapper clickable={false}>\n                      <ArrowDown size=\"16\" color={theme.colors.textSubtle} />\n                    </ArrowWrapper>\n                    <LinkStyledButton id=\"remove-recipient-button\" onClick={() => onChangeRecipient(null)}>\n                      - Remove send\n                    </LinkStyledButton>\n                  </AutoRow>\n                  <AddressInputPanel id=\"recipient\" value={recipient} onChange={onChangeRecipient} />\n                </>\n              ) : null}\n\n              {showWrap ? null : (\n                <Card padding=\".25rem .75rem 0 .75rem\" borderRadius=\"20px\">\n                  <AutoColumn gap=\"4px\">\n                    {Boolean(trade) && (\n                      <RowBetween align=\"center\">\n                        <Text fontSize=\"14px\">Price</Text>\n                        <TradePrice\n                          price={trade?.executionPrice}\n                          showInverted={showInverted}\n                          setShowInverted={setShowInverted}\n                        />\n                      </RowBetween>\n                    )}\n                    {allowedSlippage !== INITIAL_ALLOWED_SLIPPAGE && (\n                      <RowBetween align=\"center\">\n                        <Text fontSize=\"14px\">Slippage Tolerance</Text>\n                        <Text fontSize=\"14px\">{allowedSlippage / 100}%</Text>\n                      </RowBetween>\n                    )}\n                  </AutoColumn>\n                </Card>\n              )}\n            </AutoColumn>\n            <BottomGrouping>\n              {!account ? (\n                <ConnectWalletButton fullWidth />\n              ) : showWrap ? (\n                <Button disabled={Boolean(wrapInputError)} onClick={onWrap} fullWidth>\n                  {wrapInputError ??\n                    (wrapType === WrapType.WRAP ? 'Wrap' : wrapType === WrapType.UNWRAP ? 'Unwrap' : null)}\n                </Button>\n              ) : noRoute && userHasSpecifiedInputOutput ? (\n                <GreyCard style={{ textAlign: 'center' }}>\n                  <Main mb=\"4px\">Insufficient liquidity for this trade.</Main>\n                </GreyCard>\n              ) : showApproveFlow ? (\n                <RowBetween>\n                  <Button\n                    onClick={approveCallback}\n                    disabled={approval !== ApprovalState.NOT_APPROVED || approvalSubmitted}\n                    style={{ width: '48%' }}\n                    variant={approval === ApprovalState.APPROVED ? 'success' : 'primary'}\n                  >\n                    {approval === ApprovalState.PENDING ? (\n                      <AutoRow gap=\"6px\" justify=\"center\">\n                        Approving <Loader stroke=\"white\" />\n                      </AutoRow>\n                    ) : approvalSubmitted && approval === ApprovalState.APPROVED ? (\n                      'Approved'\n                    ) : (\n                      `Approve ${currencies[Field.INPUT]?.symbol}`\n                    )}\n                  </Button>\n                  <Button\n                    onClick={() => {\n                      if (isExpertMode) {\n                        handleSwap()\n                      } else {\n                        setSwapState({\n                          tradeToConfirm: trade,\n                          attemptingTxn: false,\n                          swapErrorMessage: undefined,\n                          showConfirm: true,\n                          txHash: undefined,\n                        })\n                      }\n                    }}\n                    style={{ width: '48%' }}\n                    id=\"swap-button\"\n                    disabled={\n                      !isValid || approval !== ApprovalState.APPROVED || (priceImpactSeverity > 3 && !isExpertMode)\n                    }\n                    variant={isValid && priceImpactSeverity > 2 ? 'danger' : 'primary'}\n                  >\n                    {priceImpactSeverity > 3 && !isExpertMode\n                      ? `Price Impact High`\n                      : `Swap${priceImpactSeverity > 2 ? ' Anyway' : ''}`}\n                  </Button>\n                </RowBetween>\n              ) : (\n                <Button\n                  onClick={() => {\n                    if (isExpertMode) {\n                      handleSwap()\n                    } else {\n                      setSwapState({\n                        tradeToConfirm: trade,\n                        attemptingTxn: false,\n                        swapErrorMessage: undefined,\n                        showConfirm: true,\n                        txHash: undefined,\n                      })\n                    }\n                  }}\n                  id=\"swap-button\"\n                  disabled={!isValid || (priceImpactSeverity > 3 && !isExpertMode) || !!swapCallbackError}\n                  variant={isValid && priceImpactSeverity > 2 && !swapCallbackError ? 'danger' : 'primary'}\n                  fullWidth\n                >\n                  {swapInputError ||\n                    (priceImpactSeverity > 3 && !isExpertMode\n                      ? `Price Impact Too High`\n                      : `Swap${priceImpactSeverity > 2 ? ' Anyway' : ''}`)}\n                </Button>\n              )}\n              {showApproveFlow && <ProgressSteps steps={[approval === ApprovalState.APPROVED]} />}\n              {isExpertMode && swapErrorMessage ? <SwapCallbackError error={swapErrorMessage} /> : null}\n              {betterTradeLinkVersion && <BetterTradeLink version={betterTradeLinkVersion} />}\n            </BottomGrouping>\n          </CardBody>\n        </Wrapper>\n      </AppBody>\n      <AdvancedSwapDetailsDropdown trade={trade} />\n    </>\n  )\n}\n\nexport default Swap\n"]},"metadata":{},"sourceType":"module"}